
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples_gallery\plot_gear_shifts_on_track.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_examples_gallery_plot_gear_shifts_on_track.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_gallery_plot_gear_shifts_on_track.py:

Gear shifts on track
=======================

Plot which gear is being used at which point of the track

.. GENERATED FROM PYTHON SOURCE LINES 8-9

Import FastF1 and load the data

.. GENERATED FROM PYTHON SOURCE LINES 9-26

.. code-block:: default


    import fastf1

    import matplotlib.pyplot as plt
    from matplotlib.collections import LineCollection
    from matplotlib import cm
    import numpy as np


    fastf1.Cache.enable_cache('../doc_cache')  # replace with your cache directory

    session = fastf1.get_session(2021, 'Austrian Grand Prix', 'Q')
    laps = session.load_laps(with_telemetry=True)

    lap = laps.pick_fastest()
    tel = lap.get_telemetry()





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    core           INFO     Loading laps for Austrian Grand Prix - Qualifying [v2.1.6]
    api            INFO     Using cached data for timing_data
    api            INFO     Using cached data for timing_app_data
    core           INFO     Processing timing data...
    api            INFO     Using cached data for session_status_data
    api            INFO     Using cached data for track_status_data
    api            INFO     Using cached data for car_data
    api            INFO     Using cached data for position_data
    api            INFO     Using cached data for weather_data
    core           INFO     Loaded data for 20 drivers: ['33', '4', '9', '18', '99', '14', '77', '16', '47', '31', '6', '55', '44', '22', '10', '5', '63', '7', '11', '3']




.. GENERATED FROM PYTHON SOURCE LINES 28-30

Prepare the data for plotting by converting it to the appropriate numpy
data types

.. GENERATED FROM PYTHON SOURCE LINES 30-38

.. code-block:: default


    x = np.array(tel['X'].values)
    y = np.array(tel['Y'].values)

    points = np.array([x, y]).T.reshape(-1, 1, 2)
    segments = np.concatenate([points[:-1], points[1:]], axis=1)
    gear = tel['nGear'].to_numpy().astype(float)








.. GENERATED FROM PYTHON SOURCE LINES 40-42

Create a line collection. Set a segmented colormap and normalize the plot
to full integer values of the colormap

.. GENERATED FROM PYTHON SOURCE LINES 42-48

.. code-block:: default


    cmap = cm.get_cmap('Paired')
    lc_comp = LineCollection(segments, norm=plt.Normalize(1, cmap.N+1), cmap=cmap)
    lc_comp.set_array(gear)
    lc_comp.set_linewidth(4)








.. GENERATED FROM PYTHON SOURCE LINES 50-51

Create the plot

.. GENERATED FROM PYTHON SOURCE LINES 51-62

.. code-block:: default


    plt.gca().add_collection(lc_comp)
    plt.axis('equal')
    plt.tick_params(labelleft=False, left=False, labelbottom=False, bottom=False)

    title = plt.suptitle(
        f"Fastest Lap Gear Shift Visualization\n"
        f"{lap['Driver']} - {session.weekend.name} {session.weekend.year}"
    )









.. GENERATED FROM PYTHON SOURCE LINES 64-66

Add a colorbar to the plot. Shift the colorbar ticks by +0.5 so that they
are centered for each color segment.

.. GENERATED FROM PYTHON SOURCE LINES 66-73

.. code-block:: default


    cbar = plt.colorbar(mappable=lc_comp, label="Gear", boundaries=np.arange(1, 10))
    cbar.set_ticks(np.arange(1.5, 9.5))
    cbar.set_ticklabels(np.arange(1, 9))


    plt.show()



.. image:: /examples_gallery/images/sphx_glr_plot_gear_shifts_on_track_001.png
    :alt: Fastest Lap Gear Shift Visualization VER - Austrian Grand Prix 2021
    :class: sphx-glr-single-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  1.564 seconds)


.. _sphx_glr_download_examples_gallery_plot_gear_shifts_on_track.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: plot_gear_shifts_on_track.py <plot_gear_shifts_on_track.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: plot_gear_shifts_on_track.ipynb <plot_gear_shifts_on_track.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
